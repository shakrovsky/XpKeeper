# XpKeeper.

На текущий момент реализована обработка следующих событий:
- [Вступление пользователя в чат ›](#вступление-пользователя-в-чат)

- [/me ›](#команда-me)
- [/top ›](#команда-top)
- [/rules ›](#команда-rules)
- [/titles ›](#команда-titles)

- [/add_xp ›](#команда-add_xp)
- [/cut_xp ›](#команда-cut_xp)
- [/penalty ›](#команда-penalty)

- [/add_title ›](#команда-add_title)
- [/del_title ›](#команда-del_title)

---

## Вступление пользователя в чат:
<img width="760" height="299" alt="new_member" src="https://github.com/user-attachments/assets/fb930dd9-8161-4f47-9c03-2f6c0e2e36ca" />
<img width="760" height="299" alt="old_member" src="https://github.com/user-attachments/assets/ab489176-ee0b-4d66-ba0b-8ee837b5ccdb" />

Если пользователь вступает в чат впервые, бот выводит приветственное сообщение и регистрирует аккаунт пользователя в системе. После регистрации профиль пользователя сохраняется навсегда.

Если пользователь выйдет из чата и снова вступит, бот узнает его и встретит другим сообщением, показывая, что профиль уже существует и данные (XP, титулы и прочее) сохранены.

[‹ Обратно к оглавлению](#xpkeeper)

## Команда /me:
<img width="435" height="275" alt="__me" src="https://github.com/user-attachments/assets/2772f5c8-86cf-46fa-8761-df08a49f4ec9" />

Команда отображает текущий титул пользователя и его уровень XP.  
Титул может быть **базовым** (т.е. соответствует текущему уровню XP) или **уникальным**.

Под «титулом» понимается индивидуальная должность, которую можно назначить каждому администратору чата.

P.S. Каждый участник чата (кроме приближённых) является администратором с **минимальными** правами.

[‹ Обратно к оглавлению](#xpkeeper)

## Команда /top:
<img width="366" height="377" alt="__top" src="https://github.com/user-attachments/assets/2641e9fc-f879-4db9-a7df-2cd13f2c3731" />

Команда выводит список из 20 пользователей с наибольшим XP в порядке убывания.
В подсчёт включаются только пользователи с зарегистрированным аккаунтом в системе.

Все имена пользователей кликабельны и ведут на их профили.
Имена и значения XP **актуальны** на момент вызова команды.

[‹ Обратно к оглавлению](#xpkeeper)

## Команда /rules:
<img width="370" height="304" alt="__rules" src="https://github.com/user-attachments/assets/6819c36b-bc11-406c-b451-0c418f36785f" />

Команда выводит правила чата.  
Содержимое хранится в конфигурации и может быть изменено при необходимости.

[‹ Обратно к оглавлению](#xpkeeper)

## Команда /titles:
<img width="489" height="340" alt="__titles" src="https://github.com/user-attachments/assets/d58910fa-c7c4-4a45-a414-31dec033554c" />
<img width="575" height="225" alt="__titles_after_edit" src="https://github.com/user-attachments/assets/3afcbec0-e837-4749-b119-cc453215092c" />
<img width="699" height="537" alt="__alert_true" src="https://github.com/user-attachments/assets/0a56312a-46d5-4d39-9b15-f45d5aac9277" />

Команда показывает текущий титул пользователя (тот, что отображается в Telegram).  
К сообщению прикрепляется inline-клавиатура, где каждая кнопка соответствует титулу, который пользователь может выбрать (см. фото 1).

При нажатии на любую кнопку:

- исходное сообщение редактируется и отображает только что выбранный титул;
- титул пользователя в самом Telegram также обновляется;
- inline-клавиатура исчезает после редактирования (см. фото 2, пример с кнопкой «Киборг»).

Команду можно безопасно использовать в общем чате.
Нажатия других пользователей (включая доверенных) не влияют на процесс — им выводится уведомление об ошибке (см. фото 3).

[‹ Обратно к оглавлению](#xpkeeper)

## /add_xp
Описание команды `/add_xp`.

## /cut_xp
Описание команды `/cut_xp`.

## /penalty
Описание команды `/penalty`.

## /add_title
Описание команды `/add_title`.

## /del_title
Описание команды `/del_title`.
